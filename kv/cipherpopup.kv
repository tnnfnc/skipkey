
#---------------------------------------------------------
# CipherPopup Popup
#---------------------------------------------------------
<CipherPopup>:
    # Properties: Login and seed
    pr_login_wid: _wid_login
	pr_seed_wid: _wid_seed
	pr_kderive: _spi_kderive
	pr_cipher: _spi_cipher
	pr_iters: _inp_iters

	auto_dismiss: False
	size_hint: 0.9, 0.9
	size_hint_max_x: 2 * ui.field_bigger_x #field_width_long
	BoxLayout:
		orientation: "vertical"
		GridLayout:
			cols: 2
			size_hint_y: None
			height: 2 * ui.spinner_y #spinner_size[1] * 2
			#--------------------------------- Cipher
			FieldLabel:
				id: _lab_cipher
				text: _('Cipher')
			Spinner:
				id: _spi_cipher
				size_hint: None, 1
				size: (ui.spinner_x, ui.spinner_y) #spinner_size
				text: root.cipher_algorithms()[0]
				values:
					root.cipher_algorithms() 
			#--------------------------------- Key generation			
			FieldLabel:
				id: _lab_keygen
				text: _('Key generation')
			BoxLayout:
				orientation: 'horizontal'
				Spinner:
					id: _spi_kderive
					size_hint: None, 1
					size: (ui.spinner_x, ui.spinner_y) #spinner_size
					text: root.key_derivators()[0]
					values:
						root.key_derivators() 
				FieldLabel:
					id: _lab_iters
					text: _('Iters.')
				InputField:
					id: _inp_iters
					width: ui.field_x # field_width_small
					text: '100000'
		#--------------------------------- Password for data encryption
		FrameTitle:
			id: _lab_pwd
			text: _('Password for data encryption')
			size_hint_y: None
		GridLayout:
			cols: 3
			size_hint_y: None
			height: 5 * ui.field_y #field_height
			Widget:
				size_hint_x: 0.2
			UserPanel:
				id: _wid_login
				size_hint_max_x: ui.field_bigger_x #field_width_long
			Widget:
				size_hint_x: 0.2
		#--------------------------------- Seed
		FrameTitle:
			id: _lab_seed
			text: _('Seed for password generation')
			size_hint_y: None
		GridLayout:
			cols: 3
			size_hint_y: None
			height: 3 * ui.field_y #field_height
			Widget:
				size_hint_x: 0.2
			SeedPanel:
				id: _wid_seed
				size_hint_max_x: ui.field_bigger_x #field_width_long
			Widget:
				size_hint_x: 0.2
		#--------------------------------- Main buttons
		GridLayout:
			cols: 3
			Widget:
			NavButton:
				id: _btn_exit
				text: _('Cancel')
				on_release:
					if hasattr(root, 'cmd_exit'): getattr(root, 'cmd_exit')()
			NavButton:
				id: _btn_file
				text: _('OK')
				on_release: 
					if hasattr(root, 'cmd_enter'): getattr(root, 'cmd_enter')()