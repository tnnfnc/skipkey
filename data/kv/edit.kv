#---------------------------------------------------------
# EDIT screen
#---------------------------------------------------------
<EditScreen>:
	# Kivy Properties
    pr_name: _inp_name
	pr_url: _inp_url
	pr_login: _inp_login
	pr_email: _inp_mail
	pr_description: _inp_description
	pr_tag: _spi_tag
	pr_color: _spi_colors
	pr_created: _out_date
	pr_changed: _out_cdate
	pr_cipherpwd: _out_cipherpwd
	pr_auto_wid: _wid_auto_tab
	pr_user_wid: _wid_user_tab
	pr_tabbedb_wid: _wid_panel
	
	BoxLayout:
		orientation: 'vertical'
		#--------------------------------- Main buttons
		ActionBar:
		    # pos_hint: {'top':1}
			ActionView:
				use_separator: True
				ActionPrevious:
					title: app.pr_timer
					with_previous: False
					app_icon: 'data/icons/skip.png'
					previous_icon: 'data/icons/left_arrow.png'
					on_release:
						if hasattr(root, 'cmd_back'): getattr(root, 'cmd_back')(app)
				ActionButton:
					important: True
					icon: 'data/icons/left_arrow.png'
					text: _('Back')
					on_release: 
						if hasattr(root, 'cmd_back'): getattr(root, 'cmd_back')(app)
				ActionButton:
					important: True
					icon: 'data/icons/save.png'
					text: _('Save')
					on_release: 
						if hasattr(root, 'cmd_save'): getattr(root, 'cmd_save')(app)
				ActionButton:
					important: True
					icon: 'data/icons/trash.png'
					text: _('Delete')
					on_release:
						if hasattr(root, 'cmd_delete'): getattr(root, 'cmd_delete')(app)
				# ActionOverflow:
		FrameTitle:
            id: _lab_account
            text: _('Edit account')
		#--------------------------------- Scroll section
		ScrollView:
			id: _scr_edit
			# scroll_timeout: 55 #msec
			# scroll_distance: 20 #px
			# scroll_type: ['bars', 'content']
			# do_scroll_x: False
			# do_scroll_y: True
			BBoxLayout:
				orientation: 'vertical'
				padding: screen_padding
				size_hint_y: None
				height: page_height

				FrameTitle:
					id: _lab_account
					text: _('Account data')
				BoxFrame:
					orientation: 'vertical'
					#---------------------------- Fields
					GridLayout:
						cols: 2
						FieldLabel:
							id: _lab_name
							text: _('Name')
						InputField:
							id: _inp_name
							hint_text: _('name')
							on_parent:
								self.focus = True
						FieldLabel:
							id: _lab_web
							text: _('Web site')
						InputField:
							id: _inp_url
							hint_text: _('web site url')
						FieldLabel:
							id: _lab_login
							text: _('Login user')
						InputField:
							id: _inp_login
							hint_text: _('login user')
						FieldLabel:
							id: _lab_mail
							text: _('e-mail')
						InputField:
							id: _inp_mail
							hint_text: _('e-mail')
						# ------------------------ Free Text
						FieldLabel:
							id: _lab_description
							size_hint_y: 1
							text: _('Free text')
						InputField:
							id: _inp_description
							hint_text: _('Free text')
							multiline: True
							size: field_size_long[0], field_height*3
				# ------------------------------- Edit screen > Security
						FieldLabel:
							id: _lab_date
							text: _('Created')
						OutputField:
							id: _out_date

						# Changed on
						FieldLabel:
							id: _lab_cdate
							text: _('Changed')
						OutputField:
							id: _out_cdate
						FieldLabel:
							id: _lab_cipherpwd
							text: _('Cipher Data')
						OutputField:
							id: _out_cipherpwd
				# ------------------------------- Edit screen > Tags and colours
				FrameTitle:
					text: _('Tag')
				BoxFrame:
					orientation: 'horizontal'
					size_hint_y: None
					height: _spi_tag.height * 1.2
					TagSpinner:
						id: _spi_tag
						pos_hint: {'center_y': 0.5}
						size_hint: None, None
						size: spinner_size
						on_text:
							if hasattr(root, 'cmd_selectiontag'): getattr(root, 'cmd_selectiontag')(self)
					BoxLayout:
						orientation: 'horizontal'
						size_hint: None, 1
						width: self.minimum_width
						padding: box_padding
						SmallButton
							id: _btn_rename
							pos_hint: {'center_y': 0.5}
							text: _('Rename')
							# background_normal: 'data/icons/rename.png'
							# background_down: 'data/icons/rename.png'
							on_release:
								if hasattr(root, 'cmd_renametag'): getattr(root, 'cmd_renametag')(self, _spi_tag)

							# Image:
								# source: 'data/icons/rename.png'
								# pos: self.pos
								# size: self.size							
							# canvas:
								# BorderImage:
									# source: 'data/icons/rename.png'
									# pos: self.pos
									# size: self.size
						SmallButton
							id: _btn_add
							pos_hint: {'center_y': 0.5}
							source: 'data/icons/pen.png'
							text: _('Add')
							on_release: 
								if hasattr(root, 'cmd_addtag'): getattr(root, 'cmd_addtag')(self, _spi_tag)
							# Image:
								# source: 'data/icons/pen.png'
								# size: _btn_add.size
						SmallButton
							id: _btn_delete
							pos_hint: {'center_y': 0.5}
							text: _('Delete')
							on_release:
								if hasattr(root, 'cmd_deletetag'): getattr(root, 'cmd_deletetag')(self, _spi_tag)
				VerticalSpace:
				TagSpinner:
					id: _spi_colors
					size_hint: None, None
					size: spinner_size
					text: _('Colors')
					values: _('White'), _('Red'), _('Green'), _('Blue'), _('Yellow')
					on_text:
						if hasattr(app, 'cmd_text_colors'): getattr(app, 'cmd_text_colors')(item, args)
				# --------------------Edit screen > Password preferences tabbed panel
				FrameTitle:
					id: _lab_pwdtab
					text: _('Password set')
				TabbedPanel:
					id: _wid_panel
					tab_pos: 'top_left'
					do_default_tab: False
					on_current_tab: 
						if hasattr(root, 'cmd_current_tab'): getattr(root, 'cmd_current_tab')(self)
					TabbedPanelItem:
						text: _('Auto')
						AutoPanel:
							id: _wid_auto_tab
					TabbedPanelItem:
						text: _('User')
						UserPanel:
							id: _wid_user_tab